<div class="container d-flex justify-content-center align-items-center" style="min-height: 100vh;">
  <div class="card shadow-sm" style="width: 100%; max-width: 420px;">
    <div class="card-header bg-primary text-white text-center py-3">
      <img src="assets/images/logoo.jpg" alt="Logo"
        class="img-fluid rounded-circle border border-3 border-white"
        style="width: 80px; height: 80px; object-fit: cover;">
      <h1 class="h4 mb-0 mt-2">Droguería Simón Bolívar</h1>
    </div>

    <div class="card-body p-4">
      <h2 class="h5 text-center text-muted mb-4">Crear cuenta</h2>

      <form [formGroup]="registerForm">
        <!-- Nombre de Usuario -->
        <div class="mb-3">
          <label class="form-label small fw-bold text-muted">
            <i class="fas fa-user me-1 text-primary"></i>Nombre de usuario
          </label>
          <div class="input-group">
            <input formControlName="username" type="text" class="form-control" [class.is-invalid]="getFormControl('username')?.invalid && 
                                 (getFormControl('username')?.dirty || 
                                  getFormControl('username')?.touched)" placeholder="Ej: juanperez">
            <span class="input-group-text bg-light">
              <i class="fas fa-at text-primary"></i>
            </span>
          </div>
          <div *ngIf="getFormControl('username')?.invalid && 
                     (getFormControl('username')?.dirty || 
                      getFormControl('username')?.touched)" class="invalid-feedback d-block small">
            <i class="fas fa-exclamation-circle me-1"></i>
            <span *ngIf="getFormControl('username')?.errors?.['required']">Campo requerido</span>
            <span *ngIf="getFormControl('username')?.errors?.['minlength']">Mínimo 3 caracteres</span>
          </div>
        </div>

        <!-- Email -->
        <div class="mb-3">
          <label class="form-label small fw-bold text-muted">
            <i class="fas fa-envelope me-1 text-primary"></i>Correo electrónico
          </label>
          <div class="input-group">
            <input formControlName="email" type="email" class="form-control" [class.is-invalid]="getFormControl('email')?.invalid && 
                                 (getFormControl('email')?.dirty || 
                                  getFormControl('email')?.touched)" placeholder="ejemplo@correo.com">
            <span class="input-group-text bg-light">
              <i class="fas fa-envelope text-primary"></i>
            </span>
          </div>
          <div *ngIf="getFormControl('email')?.invalid && 
                     (getFormControl('email')?.dirty || 
                      getFormControl('email')?.touched)" class="invalid-feedback d-block small">
            <i class="fas fa-exclamation-circle me-1"></i>
            <span *ngIf="getFormControl('email')?.errors?.['required']">Campo requerido</span>
            <span *If="getFormControl('email')?.errors?.['email']">Email inválido</span>
          </div>
        </div>

        <!-- Teléfono -->
        <div class="mb-3">
          <label class="form-label small fw-bold text-muted">
            <i class="fas fa-phone me-1 text-primary"></i>Teléfono
          </label>
          <div class="input-group">
            <input formControlName="tel" type="tel" class="form-control" [class.is-invalid]="getFormControl('tel')?.invalid && 
                                 (getFormControl('tel')?.dirty || 
                                  getFormControl('tel')?.touched)" placeholder="Ej: 3001234567">
            <span class="input-group-text bg-light">
              <i class="fas fa-mobile-alt text-primary"></i>
            </span>
          </div>
          <div *ngIf="getFormControl('tel')?.invalid && 
                     (getFormControl('tel')?.dirty || 
                      getFormControl('tel')?.touched)" class="invalid-feedback d-block small">
            <i class="fas fa-exclamation-circle me-1"></i>
            <span *ngIf="getFormControl('tel')?.errors?.['required']">Campo requerido</span>
            <span *ngIf="getFormControl('tel')?.errors?.['pattern']">Formato inválido (10-15 dígitos)</span>
          </div>
        </div>

        <!-- Contraseña -->
        <div class="mb-3">
          <label class="form-label small fw-bold text-muted">
            <i class="fas fa-lock me-1 text-primary"></i>Contraseña
          </label>
          <div class="input-group">
            <input formControlName="password" type="password" class="form-control" [class.is-invalid]="getFormControl('password')?.invalid && 
                                 (getFormControl('password')?.dirty || 
                                  getFormControl('password')?.touched)" placeholder="••••••••">
            <span class="input-group-text bg-light">
              <i class="fas fa-key text-primary"></i>
            </span>
          </div>
          <div *ngIf="getFormControl('password')?.invalid && 
                     (getFormControl('password')?.dirty || 
                      getFormControl('password')?.touched)" class="invalid-feedback d-block small">
            <i class="fas fa-exclamation-circle me-1"></i>
            <span *ngIf="getFormControl('password')?.errors?.['required']">Campo requerido</span>
            <span *ngIf="getFormControl('password')?.errors?.['minlength']">Mínimo 6 caracteres</span>
          </div>
        </div>

        <!-- Botón de Registro -->
        <button type="button" class="btn btn-primary w-100 py-2 fw-bold shadow-sm" (click)="onRegister()"
          [disabled]="registerForm.invalid || isLoading">

          <span *ngIf="!isLoading">
            <i class="fas fa-user-plus me-2"></i>Registrarse
          </span>

          <span *ngIf="isLoading">
            <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
            Procesando...
          </span>
        </button>
      </form>

      <!-- Enlace a Login -->
      <div class="text-center mt-3 small">
        ¿Ya tienes cuenta? <a routerLink="/iniciar-sesion" class="text-primary fw-bold">Inicia sesión</a>
      </div>
    </div>
  </div>
</div>